argo-cd:
  fullnameOverride: argocd

  server:
    extraArgs:
    - --insecure
    metrics: &metrics
      enabled: true
      serviceMonitor:
        enabled: true

  configs:
    cm:
      # lets not override CRD webhook caBundle
      resource.customizations.ignoreDifferences.apiextensions.k8s.io_CustomResourceDefinition: |
        jqPathExpressions:
        - ".spec.conversion.webhook.clientConfig.caBundle"
      # ignore external-secrets modifying spec
      resource.customizations.ignoreDifferences.external-secrets.io_ExternalSecret: |
        jqPathExpressions:
        - ".spec.data[]?.remoteRef.conversionStrategy"
        - ".spec.data[]?.remoteRef.decodingStrategy"
      # ignore kind/version injection in stateful set volume claims
      resource.customizations.ignoreDifferences.apps_StatefulSet: |
        jqPathExpressions:
        - ".spec.volumeClaimTemplates[]?.apiVersion"
        - ".spec.volumeClaimTemplates[]?.kind"

  dex:
    enabled: false
  controller:
    metrics: *metrics
  repoServer:
    metrics: *metrics
  redis:
    metrics: *metrics
